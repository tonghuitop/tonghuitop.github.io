<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="utf-8"><meta name="keywords" content="浏览器-一个页面从输入URL到页面加载显示完成，这个过程都发生了什么？, JavaScript react vue webpack parcel JQuery"><meta name="baidu-site-verification" content="code-XlgmDTFPBw"><meta name="google-site-verification" content="RTFx0NaB3janGA0jdKrnhcOQ_1ldQlWY6nR5qwb-EFE"><meta name="description" content="基础知识依赖计算机网络
五层因特尔协议栈:

应用层(dns、http): DNS解析成IP并完成http请求发送
传输层(tcp，udp): 三次握手四次挥手模式建立tcp连接
网络层(IP、ARP)：IP寻址
数据链路层(ppp): 将"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><title>浏览器-一个页面从输入URL到页面加载显示完成，这个过程都发生了什么？ | tonghui</title><link rel="icon" type="image/png" href="/favicon.png"><link rel="stylesheet" href="/libs/awesome/css/all.css"><link rel="stylesheet" href="/libs/materialize/materialize.min.css"><link rel="stylesheet" href="/libs/aos/aos.css"><link rel="stylesheet" href="/libs/animate/animate.min.css"><link rel="stylesheet" href="/libs/lightGallery/css/lightgallery.min.css"><link rel="stylesheet" href="/css/matery.css"><link rel="stylesheet" href="/css/my.css"><style>code[class*=language-],pre[class*=language-]{white-space:pre!important}</style><script src="/libs/jquery/jquery.min.js"></script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?46e79e71af0709a5b9106bf20cecc493";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="tonghui" type="application/atom+xml"><link rel="stylesheet" href="/css/prism-tomorrow.css"><link rel="stylesheet" href="/css/prism-line-numbers.css"><link rel="stylesheet" href="/css/prism-tomorrow.css"><link rel="stylesheet" href="/css/prism-line-numbers.css"></head><body><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="nav-wrapper container"><div class="brand-logo"><a href="/" class="waves-effect waves-light"><img src="/logo.png" class="logo-img" alt="LOGO"></a></div><a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a><ul class="right nav-menu"><li class="hide-on-med-and-down nav-item"><a href="/" class="waves-effect waves-light"><i class="fas fa-home" style="zoom:.6"></i> <span>首页</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/tags" class="waves-effect waves-light"><i class="fas fa-tags" style="zoom:.6"></i> <span>标签</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/categories" class="waves-effect waves-light"><i class="fas fa-bookmark" style="zoom:.6"></i> <span>分类</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/archives" class="waves-effect waves-light"><i class="fas fa-archive" style="zoom:.6"></i> <span>归档</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/about" class="waves-effect waves-light"><i class="fas fa-user-circle" style="zoom:.6"></i> <span>关于</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/contact" class="waves-effect waves-light"><i class="fas fa-comments" style="zoom:.6"></i> <span>留言</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/friends" class="waves-effect waves-light"><i class="fas fa-address-book" style="zoom:.6"></i> <span>友链</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/navigate" class="waves-effect waves-light"><i class="fas fa-location-arrow" style="zoom:.6"></i> <span>导航</span></a></li><li><a href="#searchModal" class="modal-trigger waves-effect waves-light"><i id="searchIcon" class="fas fa-search" title="搜索" style="zoom:.85"></i></a></li></ul><div id="mobile-nav" class="side-nav sidenav"><div class="mobile-head bg-color"><img src="/logo.png" class="logo-img circle responsive-img"><div class="logo-name">tonghui</div><div class="logo-desc">JavaScript工程师</div></div><ul class="menu-list mobile-menu-list"><li class="m-nav-item"><a href="/" class="waves-effect waves-light"><i class="fa-fw fas fa-home"></i> 首页</a></li><li class="m-nav-item"><a href="/tags" class="waves-effect waves-light"><i class="fa-fw fas fa-tags"></i> 标签</a></li><li class="m-nav-item"><a href="/categories" class="waves-effect waves-light"><i class="fa-fw fas fa-bookmark"></i> 分类</a></li><li class="m-nav-item"><a href="/archives" class="waves-effect waves-light"><i class="fa-fw fas fa-archive"></i> 归档</a></li><li class="m-nav-item"><a href="/about" class="waves-effect waves-light"><i class="fa-fw fas fa-user-circle"></i> 关于</a></li><li class="m-nav-item"><a href="/contact" class="waves-effect waves-light"><i class="fa-fw fas fa-comments"></i> 留言</a></li><li class="m-nav-item"><a href="/friends" class="waves-effect waves-light"><i class="fa-fw fas fa-address-book"></i> 友链</a></li><li class="m-nav-item"><a href="/navigate" class="waves-effect waves-light"><i class="fa-fw fas fa-location-arrow"></i> 导航</a></li><li><div class="divider"></div></li><li><a href="https://github.com/tonghuitop" class="waves-effect waves-light" target="_blank"><i class="fab fa-github-square fa-fw"></i>Fork Me</a></li></ul></div></div><style>.nav-transparent .github-corner{display:none!important}.github-corner{position:absolute;z-index:10;top:0;right:0;border:0;transform:scale(1.1)}.github-corner svg{color:#0f9d58;fill:#fff;height:64px;width:64px}.github-corner:hover .octo-arm{animation:a .56s ease-in-out}.github-corner .octo-arm{animation:none}@keyframes a{0%,to{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}</style><a href="https://github.com/tonghuitop" class="github-corner tooltipped hide-on-med-and-down" target="_blank" data-tooltip="Fork Me" data-position="left" data-delay="50"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a></nav></header><div class="bg-cover pd-header post-cover" style="background-image:url(/medias/featureimages/6.jpg)"><div class="container" style="right:0;left:0"><div class="row"><div class="col s12 m12 l12"><div class="brand"><div class="description center-align post-title">浏览器-一个页面从输入URL到页面加载显示完成，这个过程都发生了什么？</div></div></div></div></div></div><main class="post-container content"><link rel="stylesheet" href="/libs/tocbot/tocbot.css"><style>#articleContent h1::before,#articleContent h2::before,#articleContent h3::before,#articleContent h4::before,#articleContent h5::before,#articleContent h6::before{display:block;content:" ";height:100px;margin-top:-100px;visibility:hidden}#articleContent :focus{outline:0}.toc-fixed{position:fixed;top:64px}.toc-widget{width:345px;padding-left:20px}.toc-widget .toc-title{margin:35px 0 15px 0;padding-left:17px;font-size:1.5rem;font-weight:700;line-height:1.5rem}.toc-widget ol{padding:0;list-style:none}#toc-content{height:calc(100vh - 250px);overflow:auto}#toc-content ol{padding-left:10px}#toc-content ol li{padding-left:10px}#toc-content .toc-link:hover{color:#42b983;font-weight:700;text-decoration:underline}#toc-content .toc-link::before{background-color:transparent;max-height:25px}#toc-content .is-active-link{color:#42b983}#toc-content .is-active-link::before{background-color:#42b983}#floating-toc-btn{position:fixed;right:15px;bottom:76px;padding-top:15px;margin-bottom:0;z-index:998}#floating-toc-btn .btn-floating{width:48px;height:48px}#floating-toc-btn .btn-floating i{line-height:48px;font-size:1.4rem}</style><div class="row"><div id="main-content" class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="row tag-cate"><div class="col s7"><div class="article-tag"><a href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"><span class="chip bg-color">浏览器</span></a> <a href="/tags/FE/"><span class="chip bg-color">FE</span></a> <a href="/tags/%E5%89%8D%E7%AB%AF/"><span class="chip bg-color">前端</span></a> <a href="/tags/%E9%9D%A2%E8%AF%95/"><span class="chip bg-color">面试</span></a></div></div><div class="col s5 right-align"><div class="post-cate"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/JavaScript/" class="post-category">JavaScript</a></div></div></div><div class="post-info"><div class="post-date info-break-policy"><i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp; 2021-07-01</div><div class="post-date info-break-policy"><i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp; 2022-01-23</div><div class="info-break-policy"><i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp; 3.8k</div><div class="info-break-policy"><i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp; 13 分</div><div id="busuanzi_container_page_pv" class="info-break-policy"><i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;<span id="busuanzi_value_page_pv"></span></div></div></div><hr class="clearfix"><div class="card-content article-card-content"><div id="articleContent"><h3 id="基础知识依赖"><a href="#基础知识依赖" class="headerlink" title="基础知识依赖"></a>基础知识依赖</h3><h4 id="计算机网络"><a href="#计算机网络" class="headerlink" title="计算机网络"></a>计算机网络</h4><ul><li><p>五层因特尔协议栈:</p><ul><li>应用层(dns、http): DNS解析成IP并完成http请求发送</li><li>传输层(tcp，udp): 三次握手四次挥手模式建立tcp连接</li><li>网络层(IP、ARP)：IP寻址</li><li>数据链路层(ppp): 将请求数据封装成帧</li><li>物理层: 利用物理介质传输比特流(传输的时候通过双绞线，电磁波等)</li></ul></li><li><p>OIS七层框架: [多了两层，会话层，表示层]</p><ul><li>表示层: 管理不同用户和进程之间的对话</li><li>会话层：处理两个通信系统重交换信息的方式</li></ul></li><li><p>get和post的区别:</p><ul><li>get产生一个tcp数据包</li><li>get请求时会把headers和data数据一起发送出去</li><li>post请求时，浏览器先发送headers，服务器100继续，浏览器再发送data。</li></ul></li><li><p>DNS查询得到IP</p><ol><li>请求信息：首先查看域名的本地DNS缓存，该缓存存储计算机最近检索到的信息，如果计算机不知道答案，那么就需要执行一个DNS查询来查找答案</li><li>询问递归式DNS服务器<ul><li>如果信息不存储在本地，计算机会联系您的ISP（网络提供商）的递归DNS服务器</li><li>这些专用计算机会为你执行一个DNS查询工作</li><li>递归服务器有自己的缓存，所以这个查询过程通常在这里完成，并将信息还回给用户</li></ul></li><li>询问根域名服务器<ul><li>如果递归服务器没有答案，它们会查询根域名服务器</li><li>根域名服务器是一种计算机，它扮演着一种DNS的电话接线员的角色，他们不知道答案，但可以将我们的疑问指向知道在那里可以找到答案的人。</li></ul></li><li>询问TLD域名服务器<ul><li>根域名服务器将查到请求的第一部分，按从右到左的顺序，从<a href="http://www.tonghuiwu.top中找到.top，并将请求指向.top对应的顶级域名服务器(TLD).top" target="_blank" rel="noopener">www.tonghuiwu.top中找到.top，并将请求指向.top对应的顶级域名服务器(TLD).top</a></li><li>每个TLD，如果（.com, .org, .us, .top）都有自己的顶级域名服务器</li><li>这些服务器没有我们需要的信息，但他们可以直接将我们引导到有信息的服务器。</li></ul></li><li>询问权威的DNS服务器<ul><li>TLD域名服务器会继续检查请求的下一部分（tonghuiwu）<a href="http://www.tonghuiwu.com，并将查询指向负责此特定域名的服务器" target="_blank" rel="noopener">www.tonghuiwu.com，并将查询指向负责此特定域名的服务器</a></li><li>这些权威的服务器将负责了解关于特定域的所有信息，并将信息存储在DNS记录。</li></ul></li><li>找回记录<ul><li>递归服务器从权威服务器中检索tonghuiwu.top的记录，并将记录存储在本地缓存<ul><li>如果其他任何人请求tonghuiwu.top的主机记录，递归服务器已经有答案，不需要再次进行查找</li><li>素有记录都有一个期限，一个段时间后，递归服务器将需要要求一个新的记录副本，以确保信息不会过时。</li></ul></li></ul></li><li>接受答案<ul><li>有了答案，递归服务器将记录返回到计算机</li><li>然后浏览器就可以根据IP地址和服务器进行连接建立</li></ul></li></ol></li><li><p>TCP/IP请求</p><ul><li>http的本质就是TCP/IP请求</li><li>需要经历3次握手建立连接，4次挥手断开连接</li><li>TCP将http长报文划分为短报文，通过三次握手与服务器建立连接，进行可靠传输</li><li><strong>三次挥手：</strong><ul><li>客户端：你是***服务器么？</li><li>服务器：我是***服务器，你是客户端吗？</li><li>客户端： 是的，我是客户端</li><li>建立连接成功后，接下来就可以进行正式的传输数据</li></ul></li><li><strong>四次挥手断开连接</strong><ul><li>主动方： 我的数据已经发送完了，将要关闭了向你那边的信息发送通道【发送FIN报文段，进入FIN_WAIT_1状态】</li><li>被动方： 收到通道关闭的信息，发送我同意你的关闭请求【收到FIN报文，发送ACK报文段】</li><li>被动方： 我现在也关闭了向你那边发送的信息的通道，请求关闭【发送FIN报文段，被动方进入LAST_ACK状态】</li><li>主动方： 收到了被动方的关闭请求，向主动方发送【ACK报文段】，然后进入TIME_WAIT状态,在一段时间内，没有收到被动方的信息后，也关闭连接</li><li>被动方： 收到主动方的ACK报文后，关闭连接</li></ul></li></ul></li><li><p>TCP/IP的并发限制：</p><ul><li>浏览器对同一个域名下并发的TCP连接时有限制的(2-10个不等)</li><li>在http1.0中，一个资源的下载就需要一个tcp/ip请求</li></ul></li></ul><h4 id="浏览器机制"><a href="#浏览器机制" class="headerlink" title="浏览器机制"></a>浏览器机制</h4><ol><li><p>进程和线程的概念</p><ul><li>进程是操作系统资源分配的基本单位，而线程是处理器任务调度和执行的基本单位。<ul><li><strong>资源开销：</strong><ul><li><strong>进程：</strong> 每个进程都有独立的代码和数据空间（程序上下文），程序之间的切换会有较大的开销</li><li><strong>线程：</strong> 线程可以成轻量级的进程，同一类线程共享代码和数据空间，每个线程都有自己独立的运行栈和程序计数器(PC)，线程之间的切换的开销小</li></ul></li><li><strong>包含关系</strong><ul><li><strong>进程：</strong> 如果一个进程内有多个线程，执行过过程不是一条线的，而是多条线（线程）共同完成的</li><li><strong>线程：</strong> 线程是进程的一部分，所以线程也被称为清权进程或者轻量级进程。</li></ul></li><li><strong>内存分配</strong><ul><li><strong>进程：</strong> 进程之间的地址空间和资源是相互独立的</li><li><strong>线程：</strong> 同一个进程的线程共享本进程的地址空间和资源</li></ul></li><li><strong>影响关系</strong><ul><li><strong>进程：</strong> 一个进程崩溃后，在保护模式下不会对其他进程产生影响。</li><li><strong>线程：</strong> 一个线程崩溃后，整个进程都会死掉。</li><li><strong>注:</strong> 多进程比多线程健壮</li></ul></li><li><strong>执行过程</strong><ul><li><strong>进程：</strong> 每个独立的进程有程序运行的入口、顺序执行序列和程序出口。</li><li><strong>线程：</strong> 线程不能独立执行，必须依存在应用程序中，由应用程序提供多个线程执行控制，两者均可并发执行.</li></ul></li></ul></li></ul></li><li><p>多进程的浏览器</p><blockquote><p>浏览器是多进程的，有一个主控进程，以及每一个tab页面都会开一个进程(某些情况下多个tab由于优化策略会合并)</p></blockquote><p><strong>浏览器主要进程</strong></p><ol><li><strong>Browser进程：浏览器的主进程，负责协调、主控，只有一个</strong><ul><li>负责浏览器界面的显示、与用户交互（如前进、后退等）</li><li>负责各个页面的管理，创建和销毁其他进程</li><li>将Renderer进程得到的内存中的Bitmap绘制到用户界面上</li><li>网络资源的管理和下载等</li></ul></li><li><strong>第三*方插件进程</strong><ul><li>每种类型的插件对应一个进程，仅当该插件使用时才创建</li></ul></li><li><strong>GPU进程</strong><ul><li>最多一个，用于3D绘制等</li></ul></li><li><strong>浏览器渲染进程（Renderer进程、浏览器内核、内部是多线程）</strong><ul><li>默认每打开一个tab页面，就会启动一个Renderer进程</li><li>负责页面的渲染，脚本的执行，事件的处理。</li></ul></li></ol><p><strong>浏览器多进程的优势</strong></p><ol><li>避免单个page crash影响整个浏览器</li><li>避免第三方插件crash影响整个浏览器</li><li>多进程充分利用多核优势</li><li>方便使用沙盒模型隔离插件等进程，提高浏览器稳定性</li></ol><p><strong>浏览器内核（渲染进程）</strong></p><ol><li><strong>GUI渲染进程</strong><ul><li>负责浏览器界面的渲染，接卸HTML、CSS，构建DOM树和RenderObject树，布局和绘制等</li><li>当界面需要重绘制（Repaint）或由于某种操作引发回流（reflow）时该线程会执行</li><li><strong>注意：GUI渲染线程和JS引擎线程是互斥的，</strong>当JS引擎执行时GUI线程会被挂起，GUI更新会保存在一个队列中等JS引擎空闲时，立即执行。</li></ul></li><li><strong>JS引擎线程</strong><ul><li>JS内核，负责处理JavaScript脚本程序（V8引擎）</li><li>负责解析JavaScript脚本，运行代码</li><li>JS引擎一直等待着任务队列中的任务到来，然后加以处理，一个tab页面（renderer进程）中无论什么时候都只有一个JS线程在运行JS程序</li><li><strong>注意：由于GUI渲染线程和JS引擎线程是互斥的，</strong>所以如果JS程序运行时间过长，这样会导致页面渲染不连贯，导致页面渲染加载阻塞。</li></ul></li><li><strong>事件触发线程</strong><ul><li>归属于浏览器，而不是JS引擎，用来控制事件循环</li><li>当JS引擎执行代码块如setTimeOut时（也可以来自浏览器内核的其他线程，如鼠标单击事件、AJAX异步请求等），会将对应的任务添加到事件线程中</li><li>对应的事件符合触发条件被触发时，该线程就会把使劲按添加到JS的待处理队列的队尾，等待JS引擎的处理</li><li><strong>注意：由于JS的单线程的关系</strong>所以这些待处理队列中的事件都是排队等待JS引擎处理（当JS引擎空闲时才会去执行）。</li></ul></li><li><strong>定时触发器线程</strong><ul><li>setTimeOut与setInterval所在的线程</li><li>浏览器的定时计数器并不是由JavaScript引擎计数的，（因为JavaScript是单线程，如果处于阻塞状态就会影响计时准确）因此通过单独的线程来计时并触发定时（<strong>注：计时完毕后，添加到事件队列，等待JS引擎空闲时执行，并不是立即执行</strong>）</li></ul></li><li><strong>异步http请求线程</strong><ul><li>在XMLHttpRequest在连接后是通过浏览器新开一个线程请求的</li><li>将检测到状态变更时，如果设置有回调函数，异步线程就将产生状态变更事件，将这个回调再放到事件队列中，再由JS引擎执行。</li></ul></li></ol></li></ol><h3 id="一个页面从输入URL到加载显示完成，这个过程发生了什么？"><a href="#一个页面从输入URL到加载显示完成，这个过程发生了什么？" class="headerlink" title="一个页面从输入URL到加载显示完成，这个过程发生了什么？"></a>一个页面从输入URL到加载显示完成，这个过程发生了什么？</h3><ol><li>首先浏览器开启一个线程来处理这个请求</li><li>用户输入过程中，浏览器进行下拉联想，根据历史记录补全url，或者添加http协议头</li><li>判断强缓存：是否存在未过期的缓存，如果存在直接渲染页面，否则发起网络请求。</li><li>网络请求阶段：<ol><li>浏览器会对URL进行解析，一般包括（协议头、主机域名或IP地址、端口号、请求路径、查询参数、hash等），然后开启网络线程发出一个完整到http请求</li><li>当然一般我们输入的URL是服务器域名，这时就需要DNS通过域名查询得到对应的IP</li><li>DNS首先会查看浏览器DNS缓存，没有就查询计算机本地DNS缓存，还没有就询问递归式DNS服务器（即网络提供商，一般这个服务器都会有自己的缓存，所以IP查询一般在这里完成），如果没有缓存，那就需要通过根域名和TLD域名服务器指到对应的权威DNS服务器找回记录，并缓存到递归式服务器，然后递归服务器在将记录返回给本地。</li><li>有了IP地址，此时网络层便会通过IP地址寻的对应服务器的物理地址</li><li>寻得服务器地址，客户端在网络传输层便可以和服务器通过三次握手建立tcpip连接</li><li>连接建立后网络数据链路层将数据包装成帧；</li><li>最后物理层利用物理介质进行传输；</li><li>到了服务器，就会通过相反的方式将数据一层一层的还原回去；</li><li>请求到了后台服务器，一般会有统一的验证，如安全验证、跨域验证等，验证未通过就直接返回相应的http报文</li><li>验证通过后，就会进入后台代码，此时程序收到请求，然后执行对应的操作（如查询数据库等）；</li><li>如果浏览器访问过，且缓存上有对应的资源，便会与服务器最后修改时间对比，一致便返回304，告诉浏览器可使用本地缓存；【协商缓存】</li><li>前端浏览器接收到响应成功的报文后便开始下载网页</li></ol></li><li>获取的到网页将被交给浏览器内核（渲染进程）进程处理<ol><li>根据顶部定义的DTD类型进行对应的解析方式</li><li>渲染进程内部是多线程的，网页的解析将会被交给内部的GUI渲染线程处理</li><li>首先渲染线程中的HTML解析器，将HTML网页和资源从字节流解释转换成字符流</li><li>通过词法分析器将字符流解释成词语</li><li>之后经过语法分析器根据词语构成节点，最后通过这些节点组建一个DOM树</li><li>这个过程中，如果遇到DOM节点时JavaScript代码，就会调用JavaScript引擎对JavaScript代码进行解释执行，此时由JavaScript引擎和GUI渲染线程互斥，GUI渲染线程就会被挂起，渲染过程停止；如果JavaScript代码的运行中对DOM树进行了修改，那么DOM的构建需要从新开始</li><li>如果节点需要依赖其他资源，如（图片，CSS等），便会调用网络模块的资源加载器来加载它们，但它们是异步的，不会阻塞当前DOM树的构建。style正常情况下，css不会阻塞DOM树渲染，除非有通过@import动态导入的样式才会阻塞。img: 不会阻塞DOM渲染，但是如果没有设置宽高，加载完成后会触发DOM回流</li><li>如果遇到的是JavaScript资源URL（没有标记异步），则需要停止当前DOM的构建，直到JavaScript的资源加载并被JavaScript引擎执行后才继续构建DOM。<strong>async属性：</strong>脚本加载不阻碍DOM的构建，脚本加载完成后，阻碍DOM的构建，立即调用JS引擎执行脚本。<strong>defer属性：*</strong>脚本加载不阻碍DOM的构建，脚本的执行要在所有元素解析完成之后，DOMContentLoaded事件触发之前完成。</li><li>对于CSS，CSS解释器会将CSS文件解释生成内部表示结构，生成CSS规则树</li><li>然后合并CSS规则树和DOM树，生成render渲染树。根据渲染树，计算它们在设备视口内的确切位置和大小，生成layout Tree。</li><li>最后对render树进程布局和绘制，并将结果通过IO线程传递给Browser控制进程进行显示。</li></ol></li></ol><script>document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });</script></div><hr><div class="reprint" id="reprint-statement"><div class="reprint__author"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-user">文章作者:</i></span> <span class="reprint-info"><a href="https://tonghuiwu.top" rel="external nofollow noreferrer">tonghui</a></span></div><div class="reprint__type"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-link">文章链接:</i></span> <span class="reprint-info"><a href="https://tonghuiwu.top/posts/9174025056.html">https://tonghuiwu.top/posts/9174025056.html</a></span></div><div class="reprint__notice"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-copyright">版权声明:</i></span> <span class="reprint-info">本博客所有文章除特別声明外，均采用 <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a> 许可协议。转载请注明来源 <a href="https://tonghuiwu.top" target="_blank">tonghui</a> !</span></div></div><script async defer>document.addEventListener("copy", function (e) {
            let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
            M.toast({html: toastHTML})
        });

        function navToReprintStatement() {
            $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
        }</script><div class="tag_share" style="display:block"><div class="post-meta__tag-list" style="display:inline-block"><div class="article-tag"><a href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"><span class="chip bg-color">浏览器</span></a> <a href="/tags/FE/"><span class="chip bg-color">FE</span></a> <a href="/tags/%E5%89%8D%E7%AB%AF/"><span class="chip bg-color">前端</span></a> <a href="/tags/%E9%9D%A2%E8%AF%95/"><span class="chip bg-color">面试</span></a></div></div><div class="post_share" style="zoom:80%;width:fit-content;display:inline-block;float:right;margin:-.15rem 0"><link rel="stylesheet" href="/libs/share/css/share.min.css"><div id="article-share"><div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div><script src="/libs/share/js/social-share.min.js"></script></div></div></div></div></div><style>.valine-card{margin:1.5rem auto}.valine-card .card-content{padding:20px 20px 5px 20px}#vcomments textarea{box-sizing:border-box;background:url(/medias/comment_bg.png) 100% 100% no-repeat}#vcomments p{margin:2px 2px 10px;font-size:1.05rem;line-height:1.78rem}#vcomments blockquote p{text-indent:.2rem}#vcomments a{padding:0 2px;color:#4cbf30;font-weight:500;text-decoration:none}#vcomments img{max-width:100%;height:auto;cursor:pointer}#vcomments ol li{list-style-type:decimal}#vcomments ol,ul{display:block;padding-left:2em;word-spacing:.05rem}#vcomments ul li,ol li{display:list-item;line-height:1.8rem;font-size:1rem}#vcomments ul li{list-style-type:disc}#vcomments ul ul li{list-style-type:circle}#vcomments table,td,th{padding:12px 13px;border:1px solid #dfe2e5}#vcomments table,td,th{border:0}table tr:nth-child(2n),thead{background-color:#fafafa}#vcomments table th{background-color:#f2f2f2;min-width:80px}#vcomments table td{min-width:80px}#vcomments h1{font-size:1.85rem;font-weight:700;line-height:2.2rem}#vcomments h2{font-size:1.65rem;font-weight:700;line-height:1.9rem}#vcomments h3{font-size:1.45rem;font-weight:700;line-height:1.7rem}#vcomments h4{font-size:1.25rem;font-weight:700;line-height:1.5rem}#vcomments h5{font-size:1.1rem;font-weight:700;line-height:1.4rem}#vcomments h6{font-size:1rem;line-height:1.3rem}#vcomments p{font-size:1rem;line-height:1.5rem}#vcomments hr{margin:12px 0;border:0;border-top:1px solid #ccc}#vcomments blockquote{margin:15px 0;border-left:5px solid #42b983;padding:1rem .8rem .3rem .8rem;color:#666;background-color:rgba(66,185,131,.1)}#vcomments pre{font-family:monospace,monospace;padding:1.2em;margin:.5em 0;background:#272822;overflow:auto;border-radius:.3em;tab-size:4}#vcomments code{font-family:monospace,monospace;padding:1px 3px;font-size:.92rem;color:#e96900;background-color:#f8f8f8;border-radius:2px}#vcomments pre code{font-family:monospace,monospace;padding:0;color:#e8eaf6;background-color:#272822}#vcomments pre[class*=language-]{padding:1.2em;margin:.5em 0}#vcomments code[class*=language-],pre[class*=language-]{color:#e8eaf6}#vcomments [type=checkbox]:not(:checked),[type=checkbox]:checked{position:inherit;margin-left:-1.3rem;margin-right:.4rem;margin-top:-1px;vertical-align:middle;left:unset;visibility:visible}#vcomments b,strong{font-weight:700}#vcomments dfn{font-style:italic}#vcomments small{font-size:85%}#vcomments cite{font-style:normal}#vcomments mark{background-color:#fcf8e3;padding:.2em}#vcomments table,td,th{padding:12px 13px;border:1px solid #dfe2e5}table tr:nth-child(2n),thead{background-color:#fafafa}#vcomments table th{background-color:#f2f2f2;min-width:80px}#vcomments table td{min-width:80px}#vcomments [type=checkbox]:not(:checked),[type=checkbox]:checked{position:inherit;margin-left:-1.3rem;margin-right:.4rem;margin-top:-1px;vertical-align:middle;left:unset;visibility:visible}</style><div class="card valine-card" data-aos="fade-up"><div id="vcomments" class="card-content" style="display:grid"></div></div><script src="/libs/valine/av-min.js"></script><script src="/libs/valine/Valine.min.js"></script><script>new Valine({el:"#vcomments",appId:"wfbS55KpKv3dYXTNHRGk73sh-gzGzoHsz",appKey:"To2mhClg9ChMFVmNVYx5WyCm",notify:!1,verify:!1,visitor:!0,avatar:"monsterid",pageSize:"10",lang:"zh-cn",placeholder:"ヾﾉ≧∀≦)o来啊，快活啊!"})</script><article id="prenext-posts" class="prev-next articles"><div class="row article-row"><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge left-badge text-color"><i class="fas fa-chevron-left"></i>&nbsp;上一篇</div><div class="card"><a href="/posts/2294066012.html"><div class="card-image"><img src="/img/react/redux.png" class="responsive-img" alt="手写简易版redux"> <span class="card-title">手写简易版redux</span></div></a><div class="card-content article-content"><div class="summary block-with-text">前置知识订阅发布模式 发布订阅模式：一群订阅者（Subscriber）通过消息调度中心来实现基于某个主题去订阅发布者（Publisher）,当有关状态发生变化时，Publisher会基于某个主题去通知该主题下对应的订阅者（Subscribe</div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i>2021-07-11</span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/react/" class="post-category">react</a></span></div></div><div class="card-action article-tags"><a href="/tags/react/"><span class="chip bg-color">react</span></a> <a href="/tags/redux/"><span class="chip bg-color">redux</span></a> <a href="/tags/ts/"><span class="chip bg-color">ts</span></a></div></div></div><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge right-badge text-color">下一篇&nbsp;<i class="fas fa-chevron-right"></i></div><div class="card"><a href="/posts/917402502.html"><div class="card-image"><img src="/img/blog/proto.png" class="responsive-img" alt="JavaScript基础之六大继承"> <span class="card-title">JavaScript基础之六大继承</span></div></a><div class="card-content article-content"><div class="summary block-with-text">引言： 大多数OO(Object Oriented)语言都支持两种继承方式：接口继承和实现继承，而ECMAScript中无法实现接口继承，ECMAScript支持实现继承，而且其实现继承方式主要是依靠原型链来实现，本文给大家介绍js实现继</div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i>2021-06-06</span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/JavaScript/" class="post-category">JavaScript</a></span></div></div><div class="card-action article-tags"><a href="/tags/JavaScript/"><span class="chip bg-color">JavaScript</span></a> <a href="/tags/%E5%8E%9F%E5%9E%8B%E9%93%BE/"><span class="chip bg-color">原型链</span></a> <a href="/tags/%E7%BB%A7%E6%89%BF/"><span class="chip bg-color">继承</span></a></div></div></div></div></article></div><script>$("#articleContent").on("copy",function(e){if(void 0!==window.getSelection){var n=window.getSelection();if(!((""+n).length<Number.parseInt("120"))){var t=document.getElementsByTagName("body")[0],o=document.createElement("div");o.style.position="absolute",o.style.left="-99999px",t.appendChild(o),o.appendChild(n.getRangeAt(0).cloneContents()),"PRE"===n.getRangeAt(0).commonAncestorContainer.nodeName&&(o.innerHTML="<pre>"+o.innerHTML+"</pre>");var i=document.location.href;o.innerHTML+='<br />来源: tonghui<br />文章作者: tonghui<br />文章链接: <a href="'+i+'">'+i+"</a><br />本文章著作权归tonghui所有，任何形式的转载都请注明出处。",n.selectAllChildren(o),window.setTimeout(function(){t.removeChild(o)},200)}}})</script><script src="/libs/codeBlock/codeBlockFuction.js"></script><script src="/libs/codeBlock/codeLang.js"></script><script src="/libs/codeBlock/codeCopy.js"></script><script src="/libs/codeBlock/codeShrink.js"></script><style>code[class*=language-],pre[class*=language-]{white-space:pre!important}</style></div><div id="toc-aside" class="expanded col l3 hide-on-med-and-down"><div class="toc-widget"><div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div><div id="toc-content"></div></div></div></div><div id="floating-toc-btn" class="hide-on-med-and-down"><a class="btn-floating btn-large bg-color"><i class="fas fa-list-ul"></i></a></div><script src="/libs/tocbot/tocbot.min.js"></script><script>$(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h1, h2, h3, h4, h5'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4, h5').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }
            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).slideUp(500);
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).slideDown(500);
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });</script></main><footer class="page-footer bg-color"><div class="container row center-align"><div class="col s12 m8 l8 copy-right">Copyright&nbsp;&copy; <span id="year">年份</span> <a href="https://tonghuiwu.top" target="_blank">tonghui</a> |&nbsp;Powered by&nbsp;<a href="https://github.com/tonghuitop" target="_blank">tonghui</a><br>&nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span class="white-color">19.6k</span>&nbsp;字 <span id="busuanzi_container_site_pv">|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv" class="white-color"></span>&nbsp;次</span> <span id="busuanzi_container_site_uv">|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv" class="white-color"></span>&nbsp;人</span><br><span id="sitetime">载入运行时间...</span><script>function siteTime(){window.setTimeout("siteTime()",1e3);var e=36e5,t=24*e,n=new Date,o="2021",i=n.getFullYear(),r=n.getMonth()+1,a=n.getDate(),m=n.getHours(),l=n.getMinutes(),M=n.getSeconds(),d=Date.UTC(o,"5","1","0","0","0"),g=Date.UTC(i,r,a,m,l,M)-d,s=Math.floor(g/31536e6),T=Math.floor(g/t-365*s),u=Math.floor((g-(365*s+T)*t)/e),c=Math.floor((g-(365*s+T)*t-u*e)/6e4),f=Math.floor((g-(365*s+T)*t-u*e-6e4*c)/1e3);o==i?(document.getElementById("year").innerHTML=i,document.getElementById("sitetime").innerHTML="本站已安全运行 "+T+" 天 "+u+" 小时 "+c+" 分钟 "+f+" 秒"):(document.getElementById("year").innerHTML=o+" - "+i,document.getElementById("sitetime").innerHTML="本站已安全运行 "+s+" 年 "+T+" 天 "+u+" 小时 "+c+" 分钟 "+f+" 秒")}setInterval(siteTime,1e3)</script><br><span id="icp"><img src="/medias/icp.png" style="vertical-align:text-bottom"> <a href="https://beian.miit.gov.cn" target="_blank">豫ICP备2022002152号-1</a></span></div><div class="col s12 m4 l4 social-link social-statis"><a href="https://github.com/tonghuitop" class="tooltipped" target="_blank" data-tooltip="github: https://github.com/tonghuitop" data-position="top" data-delay="50"><i class="fab fa-github-alt"></i></a><a href="https://gitee.com/sharkship" class="tooltipped" target="_blank" data-tooltip="码云" data-position="top" data-delay="50"><i class="fab fa-gofore"></i></a><a href="mailto:tonghui.wu@outlook.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fas fa-at"></i></a><a href="https://wang_lianjie.gitee.io/mobai_images.gitee.io/img/about.jpg" class="tooltipped" target="_blank" data-tooltip="wechat: https://wang_lianjie.gitee.io/mobai_images.gitee.io/img/about.jpg" data-position="top" data-delay="50"><i class="fab fa-weixin"></i></a><a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=875815842" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 875815842" data-position="top" data-delay="50"><i class="fab fa-qq"></i></a><a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50"><i class="fas fa-rss"></i></a></div></div></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"><span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input"></div><div id="searchResult"></div></div></div><script src="/js/search.js"></script><script>$(function(){searchFunc("/search.xml","searchInput","searchResult")})</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fas fa-arrow-up"></i></a></div><script src="/libs/materialize/materialize.min.js"></script><script src="/libs/masonry/masonry.pkgd.min.js"></script><script src="/libs/aos/aos.js"></script><script src="/libs/scrollprogress/scrollProgress.min.js"></script><script src="/libs/lightGallery/js/lightgallery-all.min.js"></script><script src="/js/matery.js"></script><script>var st,OriginTitile=document.title;document.addEventListener("visibilitychange",function(){document.hidden?(document.title="看不见我🙈~看不见我🙈~",clearTimeout(st)):(document.title="(๑•̀ㅂ•́) ✧被发现了～",st=setTimeout(function(){document.title=OriginTitile},3e3))})</script><canvas class="fireworks" style="position:fixed;left:0;top:0;z-index:1;pointer-events:none"></canvas><script src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script><script src="/js/fireworks.js"></script><script>window.onload=function(){document.onkeydown=function(){var e=window.event||arguments[0];return 123!=e.keyCode&&(!e.ctrlKey||!e.shiftKey||73!=e.keyCode)&&(!e.shiftKey||121!=e.keyCode)&&(!e.ctrlKey||85!=e.keyCode)&&void 0},document.oncontextmenu=function(){return!1}}</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-QRKT2NH7DH"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-QRKT2NH7DH")</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?877dd42f60a5d414d74af5272797a71a";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script async src="/libs/others/busuanzi.pure.mini.js"></script><script color="0,0,255" pointcolor="0,0,0" opacity="0.7" zindex="-1" count="120" src="/libs/background/canvas-nest.js"></script><script src="/libs/instantpage/instantpage.js" type="module"></script></body></html>